{"version":3,"sources":["./script.js"],"names":["makeRouter","router","nonLeakyCollections","Map","Object","entries","foo","Set","bar","map","set","arr","obj","count","addAfterHook","buff","ArrayBuffer","i","console","log","add","push"],"mappings":"OAASA,eAAkB,oBAE3B,MAAMC,OAASD,WAAW,CAAC,GAAI,UAIzBE,oBAAsB,CAC1B,IAAIC,IAAIC,OAAOC,QAAQ,CAAEC,IAAK,SAC9B,IAAIC,IAAI,CAAC,QACT,CAAC,OACD,CAAEC,IAAK,QAIT,IAAIC,IACAC,IACAC,IACAC,IAEAC,MAAQ,EAEZZ,OAAOa,aAAa,UAAU,WAC5BL,IAAMA,KAAO,IAAIN,IACjBO,IAAMA,KAAO,IAAIH,IACjBI,IAAMA,KAAO,GACbC,IAAMA,KAAO,GAEb,MAAMG,EAAO,IAAIC,YAAY,KAE7B,IAAK,IAAIC,EAAI,EAAGA,EAAI,EAAGA,IACrBR,IAAIC,MAAMG,OAAO,WAAyBK,QAAQC,IAAIJ,MAExDL,IAAIU,KAAI,WAAyBF,QAAQC,IAAIJ,MAC7C,IAAK,IAAIE,EAAI,EAAGA,EAAI,EAAGA,IACrBN,IAAIU,MAAK,WAA2BH,QAAQC,IAAIJ,MAElD,IAAK,IAAIE,EAAI,EAAGA,EAAI,EAAGA,IACrBL,MAAMC,OAAS,WAA4BK,QAAQC,IAAIJ","sourcesContent":["import { makeRouter } from '../basicRouter.js'\n\nconst router = makeRouter(['', 'about'])\n\n// these are not leaking and should be ignored\n// eslint-disable-next-line no-unused-vars\nconst nonLeakyCollections = [\n  new Map(Object.entries({ foo: 'bar' })),\n  new Set(['foo']),\n  ['foo'],\n  { bar: 'baz' }\n]\n\n// these are leaking\nlet map\nlet set\nlet arr\nlet obj\n\nlet count = 0\n\nrouter.addAfterHook('/about', function aboutHook () {\n  map = map || new Map()\n  set = set || new Set()\n  arr = arr || []\n  obj = obj || {}\n\n  const buff = new ArrayBuffer(1000000)\n\n  for (let i = 0; i < 2; i++) {\n    map.set(++count, function mapClosure () { console.log(buff) })\n  }\n  set.add(function setClosure () { console.log(buff) })\n  for (let i = 0; i < 3; i++) {\n    arr.push(function arrayClosure () { console.log(buff) })\n  }\n  for (let i = 0; i < 4; i++) {\n    obj[++count] = function objectClosure () { console.log(buff) }\n  }\n})\n"]}